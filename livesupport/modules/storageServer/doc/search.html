<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
  <meta content="text/html; charset=UTF-8" http-equiv="content-type">
  <title>storageServer search query format description</title>
  <meta content="$Author: tomas $" name="author">
</head>
<body>
<h1>Preface</h1>
This document is part of the
<a href="http://livesupport.campware.org/">LiveSupport</a>
project, Copyright Â© 2004 <a href="http://www.mdlf.org/">Media
Development Loan Fund</a>, under the GNU <a
 href="http://www.gnu.org/licenses/gpl.html">GPL</a>.<br>
<ul>
  <li>Author: $Author: tomas $</li>
  <li>Version: $Revision: 1.1 $</li>
  <li>Location: $Source: /home/paul/cvs2svn-livesupport/newcvsrepo/livesupport/modules/storageServer/doc/Attic/search.html,v $</li>
</ul>
<h1>Scope</h1>
This document describes search query format for searching in storageServer
metadata database.<br>
<h1>Introduction</h1>
How to call search methods:
<ul>
  <li>PHP: <code>$locStor-&gt;searchMetadata($sessid, $criteria)</code></li>
  <li>XMLRPC: <code>locstor.searchMetadata</code> 
    (with struct parameter containing <code>sessid</code> string and
    <code>criteria</code> struct)
  </li>
</ul>

<h2>Criteria format (php/xmlrpc)</h2>
Type: hash/struct with following fields:<br>
<ul>
  <li>filetype - string, type of searched files,
    meaningful values: 'audioclip', 'playlist', 'all'</li>
  <li>operator - string, type of conditions join
    (any condition matches / all conditions match), 
    meaningful values: 'and', 'or', ''
    (may be empty or ommited only with less then 2 items in
    &quot;conditions&quot; field)
  </li>
  <li>conditions - array of hashes/structs with structure:
    <ul>
        <li>cat - string, metadata category name</li>
        <li>op - string, operator - meaningful values:
            'full', 'partial', 'prefix', '=', '&lt;', '&lt;=', '&gt;', '&gt;='</li>
        <li>val - string, search value</li>
    </ul>
  </li>
</ul>

<h2>Return value</h2>
Hash/struct with fields:<br>
<ul>
    <li>results - array, array with gunid strings of files have been found</li>
</ul>

<!--
<h2></h2>
<ul>
</ul>
-->
<br>
</body>
</html>
